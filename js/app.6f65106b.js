(function(e){function t(t){for(var a,o,c=t[0],i=t[1],l=t[2],u=0,p=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/king-sombra-games/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("19b3"),n=r.n(a);n.a},1:function(e,t){},"10fc":function(e,t,r){},"19b3":function(e,t,r){},"1cf5":function(e,t,r){"use strict";var a=r("c3c7"),n=r.n(a);n.a},2:function(e,t){},"445f":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("d1e78");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",{staticClass:"ma-0"},[r("v-container",{staticClass:"main-container text-center",attrs:{fluid:""}},["gameSelected"===e.state||"gameSelection"===e.state?[r("h1",{staticClass:"mt-5"},[e._v("KING SOMBRA GAMES "+e._s(e.selectedGame?" - "+e.selectedGame.toUpperCase():""))]),r("v-row",[r("v-col",{attrs:{cols:"4",offset:"2"}},["gameSelection"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:function(t){return e.selectGame("snake")}}},[e._v(" SNAKE ")]):e._e(),"gameSelected"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:e.openRoom}},[e._v(" START ")]):e._e()],1),r("v-col",{attrs:{cols:"4"}},["gameSelection"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:function(t){return e.selectGame("poker")}}},[e._v(" POKER ")]):e._e(),"gameSelected"===e.state?r("v-card",{staticClass:"choose-game-btn",attrs:{color:"deep-purple darken-4",dark:""},on:{click:e.joinRoom}},[e._v(" JOIN ")]):e._e()],1)],1)]:e._e(),"roomOpened"===e.state?[e.privateScreen?e._e():r("GameRoom",{attrs:{selectedGame:e.selectedGame},on:{mainScreen:e.roomSelection}}),e.privateScreen?r("Controls",{attrs:{selectedGame:e.selectedGame,screenId:e.screenId},on:{mainScreen:e.roomSelection}}):e._e()]:e._e()],2)],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game-room"},[r("v-row",{staticClass:"main-row"},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"main-card"},[r("v-row",{staticClass:"game-room-row"},[r("v-col",{staticClass:"justify-center align-center text-center game-screen",attrs:{cols:"8"}},[r("v-card",{staticClass:"game-card"},[["roomOpened","roomReady","gameCountdown","gameEnded"].includes(e.roomState)?r("div",{staticClass:"waiting-card deep-purple darken-4 white--text"},["roomOpened"===e.roomState?[r("h1",[e._v("WAITING FOR PLAYERS...")]),r("br"),r("p",[e._v("Scan the QR code or use the PEER ID to join the game:")]),r("br"),r("img",{attrs:{alt:"QR code",src:e.qrCodeUrl}}),r("br"),e._v(" PEER ID: "+e._s(e.peerId)+" "),r("br"),r("br"),r("h3",[e._v("CLICK 'READY' TO JOIN THE NEXT ROUND OF "+e._s(e.selectedGame.toUpperCase()))])]:e._e(),"roomReady"===e.roomState?[r("h3",[e._v("CLICK 'READY' TO JOIN THE NEXT ROUND OF "+e._s(e.selectedGame.toUpperCase()))]),r("v-btn",{staticClass:"mt-5 start-btn",attrs:{large:"",color:"white deep-purple--text"},on:{click:e.startGameCountDown}},[e._v(" START GAME ")]),r("br"),r("br"),r("br"),r("p",[e._v("Scan the QR code or use the PEER ID to join the game:")]),r("br"),r("img",{attrs:{alt:"QR code",src:e.qrCodeUrl}}),r("br"),e._v(" PEER ID: "+e._s(e.peerId)+" ")]:e._e(),"gameCountdown"===e.roomState?[r("h1",[e._v("GAME STARTING IN")]),r("h1",[e._v(e._s(e.countDown))])]:e._e(),"gameEnded"===e.roomState?[r("h1",[e._v("RESULTS:")]),r("v-row",{staticClass:"results-row"},[r("v-list",e._l(e.results,(function(t){return r("v-list-item",{key:t.peerId},[r("v-list-item-icon",[r("v-icon",{attrs:{color:t.color}},[e._v("person")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Player "+e._s(t.peerId)+" - "+e._s(t.score))])],1)],1)})),1)],1),r("v-btn",{staticClass:"mt-5 start-btn new-game-btn",attrs:{large:"",color:"white deep-purple--text"},on:{click:e.newGame}},[e._v(" PLAY AGAIN ")])]:e._e()],2):e._e(),"gameStarted"===e.roomState&&"snake"===e.selectedGame?r("Snake",{attrs:{players:e.players.filter((function(e){return"playing"===e.state})),connections:e.connections},on:{updateScore:e.updateScore,gameOver:e.gameOver}}):e._e(),"gameStarted"===e.roomState&&"poker"===e.selectedGame?r("Poker",{attrs:{players:e.players.filter((function(e){return"playing"===e.state}))}}):e._e()],1)],1),r("v-col",{staticClass:"align-end",attrs:{cols:"4"}},[r("div",{staticClass:"stats-side"},[r("v-row",[r("h3",[e._v("Players ("+e._s(e.sortedPlayingPlayers.length)+")")])]),r("v-row",[r("v-list",e._l(e.sortedPlayingPlayers,(function(t){return r("v-list-item",{key:t.peerId},[r("v-list-item-icon",[r("v-icon",{attrs:{color:t.color}},[e._v("person")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Player "+e._s(t.peerId)+" ("+e._s(t.state)+") - "+e._s(t.score))])],1)],1)})),1)],1),r("v-row",[r("h3",[e._v("Viewers ("+e._s(e.players.filter((function(e){return"playing"!==e.state&&"ready"!==e.state})).length)+")")])]),r("v-row",[r("v-list",e._l(e.players.filter((function(e){return"playing"!==e.state&&"ready"!==e.state})),(function(t){return r("v-list-item",{key:t.peerId},[r("v-list-item-icon",[r("v-icon",{attrs:{color:t.color}},[e._v("person")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("Player "+e._s(t.peerId)+" ("+e._s(t.state)+") ")])],1)],1)})),1)],1)],1),"gameStarted"===e.roomState||"gameCountdown"===e.roomState||"gameEnded"===e.roomState?r("div",{staticClass:"qr-code-side"},[r("v-row",{staticClass:"row-100-width"},[r("p",{staticClass:"margin-auto"},[e._v("Scan the QR code to join the game:")])]),r("v-row",{staticClass:"row-100-width"},[r("img",{staticClass:"margin-auto",attrs:{alt:"QR code",src:e.qrCodeUrl}})]),r("v-row",{staticClass:"row-100-width"},[r("p",{staticClass:"margin-auto"},[e._v("PEER ID: "+e._s(e.peerId))])])],1):e._e()])],1)],1)],1)],1)],1)},c=[],i=(r("a4d3"),r("4de4"),r("4160"),r("caad"),r("a15b"),r("d81d"),r("45fc"),r("4e827"),r("accc"),r("0d03"),r("4fad"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("25f0"),r("2532"),r("5319"),r("159b"),r("284c")),l=r("2fa7"),d=r("e587"),u=r("a0bc"),p=r.n(u),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{color:"snake-container"}},[e.gameOver?e._e():r("table",{staticClass:"align-center justify-center text-center snake-table",attrs:{cellspacing:"0",cellpadding:"0"}},e._l(e.gridSize,(function(t){return r("tr",{key:t},e._l(e.gridSize,(function(a){return r("td",{key:""+a+t,staticClass:"grid-cell",class:{snake1:e.snakes[0]&&e.snakes[0].active&&e.snakes[0].body.includes(a+" "+t),snake2:e.snakes[1]&&e.snakes[1].active&&e.snakes[1].body.includes(a+" "+t),snake3:e.snakes[2]&&e.snakes[2].active&&e.snakes[2].body.includes(a+" "+t),snake4:e.snakes[3]&&e.snakes[3].active&&e.snakes[3].body.includes(a+" "+t),food:e.food.includes(a+" "+t)}})})),0)})),0)])},v=[];r("99af"),r("c975"),r("a9e3"),r("1276"),r("04d3");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"Snake",props:["players","connections"],data:function(){return{gameOver:!1,intervals:[],snakes:[{body:["3 5","3 4","3 3","3 2"],direction:"D",active:!1,color:"#4DB6AC"},{body:["38 35","38 36","38 37","38 38"],direction:"U",active:!1,color:"#64B5F6"},{body:["6 38","5 38","4 38","3 38"],direction:"R",active:!1,color:"#E57373"},{body:["35 3","36 3","37 3","38 3"],direction:"L",active:!1,color:"#FFEE58"}],food:["5 5","15 4"],gridSize:40}},created:function(){var e=this,t=this.players.map((function(e){return e.position}));this.snakes=this.snakes.map((function(e,r){return t.includes(r)?y({},e,{active:!0}):e})),this.activeSnakes.forEach((function(t,r){e.intervals[r]=setInterval((function(){e.moveSnake(r,t.direction)}),100)})),this.placeFood(0),this.placeFood(1);for(var r=0,a=Object.entries(this.connections);r<a.length;r++){var n=Object(d["a"])(a[r],2),s=n[0],o=n[1];this.players.map((function(e){return e.peerId})).includes(s)&&o.on("data",(function(t){if("moveSnake"===t.type){var r=e.players.filter((function(e){return e.peerId===t.peerId}))[0],a=e.snakes[r.position].direction;["L","R"].includes(t.direction)?e.snakes[r.position].direction=["U","D"].includes(a)?t.direction:a:["U","D"].includes(t.direction)&&(e.snakes[r.position].direction=["L","R"].includes(a)?t.direction:a)}}))}},computed:{activeSnakes:function(){return this.snakes.filter((function(e){return e.active}))}},watch:{activeSnakes:function(){this.activeSnakes.length||this.$emit("gameOver")}},methods:{moveSnake:function(e,t){var r=Object(i["a"])(this.snakes[e].body);if(1===Number(r[0].split(" ")[0])&&"L"===this.snakes[e].direction||Number(r[0].split(" ")[0])===this.gridSize&&"R"===this.snakes[e].direction||1===Number(r[0].split(" ")[1])&&"U"===this.snakes[e].direction||Number(r[0].split(" ")[1])===this.gridSize&&"D"===this.snakes[e].direction||this.isSnakeHit(e,r[0]))return clearInterval(this.intervals[e]),void this.blink(e);this.snakes[e].body[0]=this.moveHead(this.snakes[e].body[0],t),this.snakes[e].body=this.snakes[e].body.map((function(e,t,a){return 0===t?a[0]:r[t-1]})),this.snakes[e].direction=t,this.food.includes(r[0])&&(this.snakes[e].body.push(r[r.length-1]),this.placeFood(this.food.indexOf(r[0])),this.$emit("updateScore",{playerPosition:e,score:10}))},moveHead:function(e,t){var r=e.split(" ");switch(t){case"D":return"".concat(r[0]," ").concat(Number(r[1])+1);case"U":return"".concat(r[0]," ").concat(Number(r[1])-1);case"L":return"".concat(Number(r[0])-1," ").concat(r[1]);case"R":return"".concat(Number(r[0])+1," ").concat(r[1])}},blink:function(e){var t=this,r=document.querySelectorAll(".snake".concat(e+1));r.forEach((function(r){var a=0,n=setInterval((function(){"hidden"===r.style.visibility?(r.style.visibility="visible",2===a++&&(clearInterval(n),t.killSnake(e))):r.style.visibility="hidden"}),300)}))},placeFood:function(e){var t=!1,r=0,a=0;while(!t)r=Math.floor(Math.random()*this.gridSize)+1,a=Math.floor(Math.random()*this.gridSize)+1,t=!0,this.activeSnakes.forEach((function(e){e.body.includes("".concat(r," ").concat(a))&&(t=!1)}));this.food[e]="".concat(r," ").concat(a)},isSnakeHit:function(e,t){var r=!1;return this.activeSnakes.forEach((function(a,n){e!==n&&a.body.includes(t)&&(r=!0)})),r},killSnake:function(e){this.snakes[e].active=!1}}},g=h,b=(r("9b47"),r("2877")),S=Object(b["a"])(g,m,v,!1,null,"351647f0",null),_=S.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"poker-container"},[r("v-container",[r("v-row",[r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>5?[e._v(" Player "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 5===e.position}))[0].peerId)+" "),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(15),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(16),alt:""}}),e._v(" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 5===e.position}))[0].score)+" "),5===e.dealer?r("v-avatar",{attrs:{color:"red",size:"40"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e()]:e._e()],2),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>2?[e._v(" "+e._s(e.players.filter((function(e){return 2===e.position}))[0].peerId)+" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 2===e.position}))[0].score)+" "),2===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e(),r("div",[r("img",{staticClass:"player-card",attrs:{src:e.cardImage(9),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(10),alt:""}}),r("v-card",{attrs:{color:"red lighten-3"}},[e._v(e._s(e.activePlayers.filter((function(e){return 2===e.position}))[0].action))])],1)]:e._e()],2),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>7?[e._v(" Player "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 7===e.position}))[0].peerId)+" "),r("br"),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(19),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(20),alt:""}}),e._v(" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 7===e.position}))[0].score)+" "),7===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e()]:e._e()],2),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>8?[e._v(" Player "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 8===e.position}))[0].peerId)+" "),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(21),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(22),alt:""}}),e._v(" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 8===e.position}))[0].score)+" "),8===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e()]:e._e()],2)],1),r("v-row",[r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>4?[e._v(" Player "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 4===e.position}))[0].peerId)+" "),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(13),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(14),alt:""}}),e._v(" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 4===e.position}))[0].score)+" "),4===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e()]:e._e()],2),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"6"}},[r("img",{staticClass:"table-card",attrs:{src:e.cardImage(0),alt:""}}),r("img",{staticClass:"table-card",attrs:{src:e.cardImage(1),alt:""}}),r("img",{staticClass:"table-card",attrs:{src:e.cardImage(2),alt:""}}),r("img",{staticClass:"table-card",attrs:{src:e.cardImage(3),alt:""}}),r("img",{staticClass:"table-card",attrs:{src:e.cardImage(4),alt:""}})]),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>9?[e._v(" "+e._s(e.players.filter((function(e){return 9===e.position}))[0].peerId)+" "+e._s(e.players.filter((function(e){return 9===e.position}))[0].score)+" "),9===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e(),r("div",[r("img",{staticClass:"player-card",attrs:{src:e.cardImage(23),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(24),alt:""}}),r("v-card",{attrs:{color:"red lighten-3"}},[e._v(e._s(e.activePlayers.filter((function(e){return 9===e.position}))[0].action))])],1)]:e._e()],2)],1),r("v-row",[r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length>1?[e._v(" "+e._s(e.players.filter((function(e){return 1===e.position}))[0].peerId)+" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 1===e.position}))[0].score)+" "),1===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e(),r("div",[r("img",{staticClass:"player-card",attrs:{src:e.cardImage(7),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(8),alt:""}}),r("v-card",{attrs:{color:"red lighten-3"}},[e._v(e._s(e.activePlayers.filter((function(e){return 1===e.position}))[0].action))])],1)]:e._e()],2),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}}),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}}),r("v-col",{staticClass:"green darken-4 white--text",attrs:{cols:"3"}},[e.players.length?[e._v(" "+e._s(e.players.filter((function(e){return 0===e.position}))[0].peerId)+" "),r("br"),e._v(" "+e._s(e.players.filter((function(e){return 0===e.position}))[0].score)+" "),0===e.dealer?r("v-avatar",{attrs:{color:"red",size:"30"}},[r("span",{staticClass:"white--text headline"},[e._v("D")])]):e._e(),r("div",[r("img",{staticClass:"player-card",attrs:{src:e.cardImage(5),alt:""}}),r("img",{staticClass:"player-card",attrs:{src:e.cardImage(6),alt:""}}),r("v-card",{attrs:{color:"red lighten-3"}},[e._v(e._s(e.activePlayers.filter((function(e){return 0===e.position}))[0].action))])],1)]:e._e()],2)],1)],1)],1)},k=[];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={name:"Poker",props:["players"],data:function(){return{cards:[],dealer:0,currentTurn:1,currentPlayers:[],tableChips:0}},created:function(){this.randomGame(),this.currentPlayers=this.players,this.currentPlayers=this.currentPlayers.map((function(e){return O({},e,{folded:!1,action:"WAITING",currentScore:e.score})})),this.startGame()},computed:{activePlayers:function(){return this.currentPlayers.filter((function(e){return!e.folded}))}},methods:{randomGame:function(){var e=[];while(e.length<5+2*this.players.length){var t=Math.floor(52*Math.random())+1;e.includes.randomNum||e.push(t)}this.cards=e.map((function(e){var t="";return e<14?t="H":e<27?t="C":e<40?t="D":e<53&&(t="S"),t+=e%13+1,{card:t,shown:!1}}))},cardImage:function(e){return this.cards[e].shown?"img/".concat(this.cards[e].card,".svg"):"img/card-back.svg"},showPlayerCards:function(){this.$emit("showPlayerCards",this.cards.map((function(e){return e.card})))},nextPlayer:function(){this.currentTurn=this.activePlayers.length===this.currentTurn?0:this.currentTurn+1},showPlayerAction:function(e,t){this.activePlayers[e].action=t},startGame:function(){this.activePlayers[this.currentTurn].currentScore=this.activePlayers[this.currentTurn].currentScore-1,this.showPlayerAction(this.currentTurn,"Small Blind 1"),this.nextPlayer(),this.activePlayers[this.currentTurn].currentScore=this.activePlayers[this.currentTurn].currentScore-2,this.showPlayerAction(this.currentTurn,"Big Blind 2")}}},I=P,j=(r("e5f7"),r("6544")),R=r.n(j),E=r("8212"),D=r("b0af"),G=r("62ad"),x=r("a523"),F=r("0fd9"),T=Object(b["a"])(I,C,k,!1,null,"7626e664",null),A=T.exports;R()(T,{VAvatar:E["a"],VCard:D["a"],VCol:G["a"],VContainer:x["a"],VRow:F["a"]});var V=r("96dd");function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z={name:"GameRoom",components:{Snake:_,Poker:A},props:["selectedGame"],data:function(){return{peerId:"",connections:{},peer:null,games:{snake:{defaultScore:0,minPlayers:1,maxPlayers:4},poker:{defaultScore:1e3,minPlayers:1,maxPlayers:10}},playerColors:["#4DB6AC","#E57373","#64B5F6","#FFEE58","#BA68C8","#FFB74D","#4DB6AC","#F06292","#80DEEA","#AED581"],roomState:"roomOpened",players:[],countDown:0,ts:null}},created:function(){this.openRoom()},computed:{qrCodeUrl:function(){if(!this.privateScreen)return"https://api.qrserver.com/v1/create-qr-code/?data=https://stubnovalucia.github.io/king-sombra-games/?game="+this.selectedGame+"%26screenid="+this.peerId+"&size=200x200"},readyPlayers:function(){return this.players.filter((function(e){return"ready"===e.state}))},sortedPlayingPlayers:function(){var e=this.players.filter((function(e){return"playing"===e.state||"ready"===e.state}));return e.sort((function(e,t){return t.score-e.score})),e}},watch:{readyPlayers:function(){this.readyPlayers.length>=this.games[this.selectedGame].minPlayers&&(this.roomState="roomReady")},roomState:function(){for(var e=this,t=function(){var t=Object(d["a"])(a[r],2),n=t[0],s=(t[1],e.players.filter((function(e){return e.peerId===n})));if(s.length){var o={type:"roomState",roomState:e.roomState};e.sendDataToPrivateScreens(["connected","ready","playing","gameOver"],o),"gameEnded"===e.roomState&&e.sendDataToPrivateScreens(["connected","ready","playing","gameOver"],{type:"playerState",playerState:"connected"})}},r=0,a=Object.entries(this.connections);r<a.length;r++)t()}},methods:{sendDataToPrivateScreens:function(e,t){for(var r=this,a=function(){var a=Object(d["a"])(s[n],2),o=a[0],c=a[1],i=r.players.filter((function(t){return t.peerId===o&&e.includes(t.state)}));i.length&&c.send(t)},n=0,s=Object.entries(this.connections);n<s.length;n++)a()},initializePeer:function(){var e=this;this.peer=new p.a,this.peer.on("open",(function(t){e.peerId=t})),this.peer.on("error",(function(t){e.$emit("mainScreen"),alert(""+t)}))},openRoom:function(){var e=this;this.initializePeer();var t=V["create"]({peers:[],interval:1e3,delay:200,timeout:1e3});t.on("sync",(function(r){if(console.log("sync "+r),"start"==r){var a=Object.keys(e.peer.connections).filter((function(t){return e.peer.connections[t].some((function(e){return e.open}))}));t.options.peers=a,console.log("syncing with peers ["+t.options.peers.join(", ")+"]"),t.options.peers.length&&console.log("syncing with "+t.options.peers.join(", ")+"...")}})),t.on("change",(function(e){console.log("changed offset: "+e)})),t.send=function(t,r,a){var n=e.peer.connections[t],s=n&&n.filter((function(e){return e.open}))[0];return s?s.send(r):console.log(new Error("Cannot send message: not connected to "+t).toString()),Promise.resolve()},this.ts=t,setInterval((function(){console.log("System time: "+(new Date).toISOString().replace(/[A-Z]/g," ")),console.log("Synced time: "+new Date(t.now()).toISOString().replace(/[A-Z]/g," "))}),1e3),this.peer.on("connection",(function(r){e.players.push({peerId:r.peer,state:"connected",color:"#546E7A",score:e.games[e.selectedGame].defaultScore,position:-1}),e.connections[r.peer]=r,e.connections[r.peer].on("open",(function(t){e.readyPlayers.length===e.games[e.selectedGame].maxPlayers&&e.connections[r.peer].send({type:"roomFull"}),r.send({type:"roomState",roomState:e.roomState})})),e.connections[r.peer].on("data",(function(a){switch(console.log("data received"),t.receive(e.connections[r.peer].peer,a),a.type){case"playerReady":if(e.readyPlayers.length<e.games[e.selectedGame].maxPlayers){var n=e.playerColors[e.getPlayerPosition()];e.players=e.players.map((function(t){return t.peerId===a.peerId?N({},t,{state:"ready",position:e.getPlayerPosition(),color:n}):t})),e.connections[r.peer].send({type:"playerState",playerState:"ready",playerColor:n}),e.readyPlayers.length===e.games[e.selectedGame].maxPlayers&&e.sendDataToPrivateScreens(["connected"],{type:"roomFull"})}else e.connections[r.peer].send({type:"roomFull"});break;case"playerStartGame":e.startGameCountDown();break}})),e.connections[r.peer].on("close",(function(){e.players=e.players.filter((function(e){return e.peerId!==r.peer})),e.game=getGame("one"),console.log("playing already and connecting")}))}))},selectGame:function(e){this.selectedGame=e,this.gameSelected=!0},getPlayerPosition:function(){var e=!1,t=0;while(!e){if(!this.readyPlayers.filter((function(e){return e.position===t})).length)return t;t++}},startGameCountDown:function(){var e=this;this.roomState="gameCountdown",this.countDown=10;var t=setInterval((function(){e.countDown-=1,0===e.countDown&&(clearInterval(t),e.startGame())}),1e3)},startGame:function(){this.players=this.players.map((function(e){return"ready"===e.state?N({},e,{state:"playing"}):e})),this.sendDataToPrivateScreens(["playing"],{type:"playerState",playerState:"playing"}),this.roomState="gameStarted"},updateScore:function(e){this.players=this.players.map((function(t){return t.position===e?N({},t,{score:t.score+10}):t}))},gameOver:function(){var e=this;this.results=Object(i["a"])(this.sortedPlayingPlayers),this.players=this.players.map((function(t){return N({},t,{color:"#546E7A",state:"connected",score:e.games[e.selectedGame].defaultScore})})),this.roomState="gameEnded"},newGame:function(){this.roomState="roomOpened"}}},$=z,L=(r("7e1e"),r("8336")),M=r("132d"),U=r("8860"),B=r("da13"),H=r("5d23"),Q=r("34c3"),Y=Object(b["a"])($,o,c,!1,null,null,null),J=Y.exports;R()(Y,{VBtn:L["a"],VCard:D["a"],VCol:G["a"],VIcon:M["a"],VList:U["a"],VListItem:B["a"],VListItemContent:H["a"],VListItemIcon:Q["a"],VListItemTitle:H["b"],VRow:F["a"]});var K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"controls"},[e.roomFull?r("v-card",{staticClass:"player-btn red darken-4 white--text",attrs:{dark:""}},[e._v(" WAIT FOR A FREE SPOT ")]):["gameStarted"!==e.roomState&&"gameCountdown"!==e.roomState?["connected"===e.playerState?r("v-card",{staticClass:"player-btn deep-purple darken-4 white--text",attrs:{dark:""},on:{click:e.playerReady}},[e._v(" READY ")]):e._e(),"ready"===e.playerState&&"roomReady"===e.roomState?r("v-card",{staticClass:"player-btn deep-purple darken-4 white--text",attrs:{dark:""},on:{click:e.playerStartGame}},[e._v(" START GAME ")]):e._e(),"ready"===e.playerState&&"roomOpened"===e.roomState?r("v-card",{staticClass:"player-btn  deep-purple darken-4 white--text",attrs:{dark:""}},[e._v(" WAITING FOR OTHER PLAYERS... ")]):e._e()]:e._e(),"gameStarted"===e.roomState||"gameCountdown"===e.roomState?["playing"!==e.playerState&&"ready"!==e.playerState?r("v-card",{staticClass:"player-btn red darken-4 white--text",attrs:{dark:""}},[e._v(" WAIT FOR ANOTHER ROUND ")]):e._e(),"playing"===e.playerState||"ready"===e.playerState?["snake"===e.selectedGame?r("SnakeControls",{attrs:{playerColor:e.playerColor},on:{moveSnake:e.sendDataToPublicScreen}}):e._e(),"poker"===e.selectedGame?r("PokerControls",{attrs:{playerColor:e.playerColor}}):e._e()]:e._e()]:e._e()]],2)},W=[],X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"main-row"},[r("v-col",{staticClass:"main-col",attrs:{cols:"12"}},[r("v-row",{staticClass:"row-100",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"4",justify:"center"}},[r("v-card",{staticClass:"control-card side-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("L")}}},[r("v-icon",[e._v(" keyboard_arrow_left ")])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-row",{staticClass:"row-50"},[r("v-card",{staticClass:"control-card middle-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("U")}}},[r("v-icon",[e._v(" keyboard_arrow_up ")])],1)],1),r("v-row",{staticClass:"row-50 mt-2"},[r("v-card",{staticClass:"control-card middle-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("D")}}},[r("v-icon",[e._v(" keyboard_arrow_down ")])],1)],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{staticClass:"control-card side-control",attrs:{color:e.playerColor},on:{click:function(t){return e.moveSnake("R")}}},[r("v-icon",[e._v(" keyboard_arrow_right ")])],1)],1)],1)],1)],1)},Z=[],ee={name:"SnakeControls",props:["playerColor"],data:function(){return{}},methods:{moveSnake:function(e){this.$emit("moveSnake",{type:"moveSnake",direction:e})}}},te=ee,re=(r("c9ae"),Object(b["a"])(te,X,Z,!1,null,null,null)),ae=re.exports;R()(re,{VCard:D["a"],VCol:G["a"],VIcon:M["a"],VRow:F["a"]});var ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{staticClass:"main-row"},[r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"row-100",attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"4",justify:"center"}},[r("img",{staticClass:"control-playing-card",attrs:{src:"img/card-back.svg"}})]),r("v-col",{attrs:{cols:"4"}},[r("img",{staticClass:"control-playing-card",attrs:{src:"img/card-back.svg"}})]),r("v-col",{attrs:{cols:"4"}},[r("v-row",{staticClass:"control-poker-row"},[r("v-btn",{staticClass:"control-poker-btn",attrs:{color:e.playerColor}},[e._v("FOLD")])],1),r("v-row",{staticClass:"control-poker-row"},[r("v-btn",{staticClass:"control-poker-btn",attrs:{color:e.playerColor}},[e._v("CALL")])],1),r("v-row",{staticClass:"control-poker-row-raise"},[r("v-btn",{staticClass:"control-poker-btn control-poker-btn-raise",attrs:{color:e.playerColor}},[e._v("RAISE")])],1)],1)],1)],1)],1)},se=[],oe={name:"PokerControls",props:["playerColor"],data:function(){return{raiseSlider:2}},methods:{fold:function(){this.$emit("fold")},call:function(){this.$emit("call")},raise:function(){this.$emit("raise",{raiseAmount:this.raiseSlider})}}},ce=oe,ie=(r("1cf5"),Object(b["a"])(ce,ne,se,!1,null,null,null)),le=ie.exports;function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(r,!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}R()(ie,{VBtn:L["a"],VCol:G["a"],VRow:F["a"]});var pe={name:"Controls",components:{SnakeControls:ae,PokerControls:le},props:["selectedGame","screenId"],data:function(){return{playerState:"connecting",roomState:"",roomFull:!1,playerColor:"#FFFFFF",peerId:"",publicScreenId:"",connection:null,ts:null}},created:function(){this.screenId?(this.publicScreenId=this.screenId,this.joinRoom()):(this.publicScreenId=prompt("Please enter the screen's peer ID:"),this.joinRoom())},methods:{sendDataToPublicScreen:function(e){this.connection.send(ue({},e,{peerId:this.peerId}))},playerReady:function(){this.sendDataToPublicScreen({type:"playerReady"})},playerStartGame:function(){this.sendDataToPublicScreen({type:"playerStartGame"})},initializePeer:function(){var e=this;this.peer=new p.a,this.peer.on("open",(function(t){e.peerId=t})),this.peer.on("error",(function(t){e.$emit("mainScreen"),alert(""+t)}))},joinRoom:function(){var e=this;this.initializePeer();var t=V["create"]({peers:[],interval:1e3,delay:200,timeout:1e3});t.on("sync",(function(r){if(console.log("sync "+r),"start"==r){var a=Object.keys(e.peer.connections).filter((function(t){return e.peer.connections[t].some((function(e){return e.open}))}));t.options.peers=a,console.log("syncing with peers ["+t.options.peers.join(", ")+"]"),t.options.peers.length&&console.log("syncing with "+t.options.peers.join(", ")+"...")}"end"==r&&console.log("")})),t.on("change",(function(e){console.log("changed offset: "+e)})),t.send=function(t,r,a){var n=e.peer.connections[t],s=n&&n.filter((function(e){return e.open}))[0];return s?(console.log("TS",r),s.send(r)):console.log(new Error("Cannot send message: not connected to "+t).toString()),Promise.resolve()},this.ts=t,this.peer.on("open",(function(r){e.connection=e.peer.connect(e.publicScreenId,{reliable:!0}),e.connection.on("open",(function(){e.playerState="connected"})),e.connection.on("error",(function(){e.$emit("mainScreen"),alert(""+err)})),e.connection.on("data",(function(r){switch(console.log("data received"),t.receive(e.connection.peer,r),r.type){case"roomState":e.roomState=r.roomState;break;case"playerState":e.playerState=r.playerState,"ready"===e.playerState&&(e.playerColor=r.playerColor);break;case"roomFull":e.roomFull=!0}}))}))},fullscreenMode:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():elem.webkitRequestFullscreen?e.webkitRequestFullscreen():elem.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation.lock("landscape-primary")}}},me=pe,ve=(r("69a9"),Object(b["a"])(me,K,W,!1,null,null,null)),fe=ve.exports;R()(ve,{VCard:D["a"]});var ye={name:"app",components:{GameRoom:J,Controls:fe},data:function(){return{selectedGame:"",privateScreen:!1,screenId:"",state:"gameSelection"}},created:function(){this.$route.query.game&&this.$route.query.screenid&&(this.state="roomOpened",this.selectedGame=this.$route.query.game,this.screenId=this.$route.query.screenid,this.privateScreen=!0)},methods:{selectGame:function(e){this.selectedGame=e,this.state="gameSelected"},openRoom:function(){this.state="roomOpened",this.fullscreenMode()},joinRoom:function(){this.state="roomOpened",this.privateScreen=!0},roomSelection:function(){this.state="gameSelected",this.privateScreen=!1},fullscreenMode:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():elem.webkitRequestFullscreen?e.webkitRequestFullscreen():elem.msRequestFullscreen&&e.msRequestFullscreen()}}},he=ye,ge=(r("034f"),r("7496")),be=Object(b["a"])(he,n,s,!1,null,null,null),Se=be.exports;R()(be,{VApp:ge["a"],VCard:D["a"],VCol:G["a"],VContainer:x["a"],VRow:F["a"]});var _e=r("f309");a["a"].use(_e["a"]);var Ce=new _e["a"]({}),ke=r("8c4f");a["a"].use(ke["a"]);var we=[],Oe=new ke["a"]({mode:"history",routes:we}),Pe=Oe;a["a"].config.productionTip=!1,new a["a"]({vuetify:Ce,router:Pe,icons:{iconfont:"md"},render:function(e){return e(Se)}}).$mount("#app")},"5e11":function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="5e11"},"69a9":function(e,t,r){"use strict";var a=r("445f"),n=r.n(a);n.a},"7e1e":function(e,t,r){"use strict";var a=r("f5c4"),n=r.n(a);n.a},9403:function(e,t,r){},"9b47":function(e,t,r){"use strict";var a=r("10fc"),n=r.n(a);n.a},ac1fd:function(e,t,r){},c3c7:function(e,t,r){},c9ae:function(e,t,r){"use strict";var a=r("ac1fd"),n=r.n(a);n.a},e5f7:function(e,t,r){"use strict";var a=r("9403"),n=r.n(a);n.a},f5c4:function(e,t,r){}});
//# sourceMappingURL=app.6f65106b.js.map